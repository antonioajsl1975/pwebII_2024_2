<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lista de Clientes</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<h1>Lista de Clientes</h1>
<div class="table-container">
<table class="table">
    <thead>
    <tr>
        <th>Id</th>
        <th>Nome/Razão Social</th>
        <th>CPF/CNPJ</th>
        <th>E-mail</th>
        <th>Telefone</th>
        <th colspan="2">Ações</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="pessoa : ${pessoas}">
        <td th:text="${pessoa.id}"></td>

        <!-- Condicional para verificar se é PessoaFisica ou PessoaJuridica -->
        <td th:text="${pessoa.tipoObjeto('PessoaFisica') ? pessoa.nome : pessoa.razaoSocial}"></td>
        <td th:text="${pessoa.tipoObjeto('PessoaFisica') ? pessoa.cpf : pessoa.cnpj}"></td>

        <td th:text="${pessoa.email}"></td>
        <td th:text="${pessoa.telefone}"></td>

        <td><a th:href="@{/pessoa/edit/{id}(id=${pessoa.id})}">Editar</a></td>

        <td>
            <a onclick="return window.confirm('Confirma a exclusão do registro?')"
            th:href="@{/pessoa/remove/{id}(id=${pessoa.id})}">Excluir</a>
        </td>
    </tr>
    </tbody>
</table>
    <div class="new-button-container">
        <a href="/pessoa/form" class="btn-new">Novo Cliente</a>
    </div>
</div>
</body>
</html>
